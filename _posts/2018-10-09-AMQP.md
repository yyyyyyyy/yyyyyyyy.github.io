---
layout: post
date:   2018-10-09 13:36:31 +0800
categories: 
---
AMQP
Advanced Message Queuing Protocal
高级消息队列

消息被发布者发送给交换机，交换机常常被比喻成邮局或者邮箱。然后交换机将收到的消息根据路由规则分发给绑定的队列。最后AMQP代理会将消息投递给订阅了此队列的消费者，或者消费者按照需求自行获取。

发布者发布消息时可以给消息指定各种消息属性。有些属性有可能会被消息代理使用，然而其他的属性则是完全不透明的，它们只能被接受消息的应用所使用。

从安全角度考虑，网络是不可靠的，接受消息的应用也有可能在处理消息的时候失败。基于此原因，AMQP模块包含了一个消息确认的概念：当一个消息从队列中投递给消费者后，消费者会通知一下消息代理，这个可以是自动的也可以由处理消息的应用的开发者执行。当消息确认被启用的时候，消息代理不会完全将消息从队列中删除，直到它收到来自消费者的确认回执（ACK）

在某些情况下，例如当一个消息无法被成功路由时，消息或许会被返回给发布者并被丢弃。

队列，交换机和绑定统称为AMQP实体。

AMQP是一个可编程的协议。某种意义上说AMQP的实体和路由规则是由应用本身定义的，而不是由消息代理定义。包括像声明队列和交换机，定义他们之间的绑定，订阅队列等等关于协议本身的操作。

交换机和交换机类型
交换机是用来发送消息的AMQP实体。交换机拿到一个西欧阿西之后将它路由给一个或零个队列。它使用哪种路由算法是由交换机类型和被称作绑定的规则所决定的。
